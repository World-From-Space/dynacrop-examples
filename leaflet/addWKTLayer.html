<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WKT Example</title>
      
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script src="https://unpkg.com/@terraformer/wkt"></script>

    <style>
        #map {
            position: absolute;
            inset: 0;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    
    <script>
    // Initialize the map
    const map = L.map('map').setView([49.07097698258071, 15.727795704303267], 16);

    // Add OpenStreetMap tile layer
    const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    // add Czech orthophoto WMS as basemap
    const wmsLayer = L.tileLayer.wms('https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer', {
        layers:'0',
        attribution: '© Czech Office for Surveying, Mapping and Cadastre'
    }).addTo(map);


    // Add WKT layer
    const wktString ='POLYGON((15.7269529 49.06792758, 15.72686777 49.06793046, 15.72645349 49.06807418, 15.72553851 49.06843533, 15.72461994 49.06878864, 15.7232543 49.06934161, 15.72290263 49.069472, 15.72305134 49.06964854, 15.7234017 49.07007874, 15.72407679 49.07089974, 15.72429504 49.07116934, 15.72431194 49.07118693, 15.72481874 49.07179382, 15.72489229 49.07188022, 15.72491033 49.07187639, 15.72494003 49.07187008, 15.72497665 49.07187856, 15.72642092 49.07467481, 15.72647864 49.07469809, 15.72694357 49.0745484, 15.72725102 49.07443076, 15.72736631 49.07437466, 15.72743638 49.07433792, 15.7274653 49.0742777, 15.72745365 49.07417535, 15.72735018 49.07403053, 15.72723737 49.07386924, 15.72725142 49.0738347, 15.72731711 49.07379054, 15.72764468 49.07366409, 15.72796787 49.07354836, 15.72824615 49.07348153, 15.72847334 49.07345734, 15.72865169 49.07347996, 15.72874768 49.07350564, 15.72885717 49.07352513, 15.72900965 49.07352809, 15.72914114 49.07349497, 15.72928536 49.07346517, 15.72936086 49.07345432, 15.72939587 49.07345889, 15.72941561 49.07348671, 15.72948667 49.07358831, 15.7295518 49.07364687, 15.72960467 49.07368131, 15.72970044 49.07372379, 15.7298017 49.07374056, 15.72990258 49.07375138, 15.73020145 49.07369978, 15.73068738 49.07360865, 15.73109109 49.07350637, 15.73183746 49.0732582, 15.73217041 49.07316652, 15.73263768 49.07304814, 15.73290359 49.07295168, 15.73309426 49.07288612, 15.73344593 49.07274173, 15.73347675 49.07270884, 15.73347244 49.07265687, 15.73322492 49.07234833, 15.73296534 49.07204798, 15.73260284 49.07162022, 15.73213665 49.07106614, 15.73073303 49.0693806, 15.73056274 49.06918015, 15.73043551 49.06900697, 15.73037523 49.06890658, 15.73034704 49.06881522, 15.73033136 49.06872124, 15.73032906 49.06854975, 15.7302816 49.06853004, 15.72993849 49.06857764, 15.72968074 49.06861443, 15.7294452 49.06865624, 15.7293561 49.068661, 15.72929448 49.06865873, 15.72921584 49.06863996, 15.72912527 49.06860167, 15.72900535 49.06852932, 15.72883338 49.0684325, 15.72866241 49.06835615, 15.72844177 49.06833335, 15.728293 49.06834919, 15.72814768 49.06837608, 15.72790989 49.06842946, 15.72778559 49.06846479, 15.72773121 49.06847985, 15.72768295 49.06847388, 15.72762418 49.06846286, 15.72758433 49.06843717, 15.72754805 49.06837379, 15.72751448 49.06829126, 15.72747727 49.06816212, 15.72743671 49.06809031, 15.7273389 49.06804156, 15.72722579 49.06799191, 15.72708061 49.06794812, 15.7269529 49.06792758), (15.72571065 49.07188796, 15.72571271 49.07188835, 15.72571466 49.07188894, 15.72571644 49.07188972, 15.72571802 49.07189068, 15.72571935 49.07189179, 15.72572039 49.07189303, 15.72572113 49.07189435, 15.72572155 49.07189573, 15.72572163 49.07189714, 15.72572137 49.07189854, 15.72572079 49.0718999, 15.72571989 49.07190118, 15.72571869 49.07190236, 15.72571723 49.07190339, 15.72571554 49.07190426, 15.72571366 49.07190495, 15.72571165 49.07190544, 15.72570954 49.07190571, 15.72570739 49.07190576, 15.72570526 49.07190559, 15.7257032 49.07190521, 15.72570125 49.07190462, 15.72569946 49.07190383, 15.72569789 49.07190287, 15.72569656 49.07190176, 15.72569551 49.07190053, 15.72569477 49.0718992, 15.72569436 49.07189782, 15.72569428 49.07189641, 15.72569453 49.07189501, 15.72569512 49.07189365, 15.72569602 49.07189237, 15.72569722 49.0718912, 15.72569868 49.07189016, 15.72570037 49.07188929, 15.72570224 49.0718886, 15.72570426 49.07188812, 15.72570637 49.07188785, 15.72570851 49.07188779, 15.72571065 49.07188796), (15.72661982 49.07204907, 15.72662189 49.07204945, 15.72662384 49.07205005, 15.72662562 49.07205083, 15.7266272 49.07205179, 15.72662852 49.0720529, 15.72662957 49.07205413, 15.72663031 49.07205546, 15.72663072 49.07205684, 15.72663081 49.07205825, 15.72663055 49.07205965, 15.72662996 49.07206101, 15.72662906 49.07206229, 15.72662787 49.07206346, 15.72662641 49.0720645, 15.72662472 49.07206537, 15.72662284 49.07206606, 15.72662083 49.07206654, 15.72661872 49.07206682, 15.72661657 49.07206687, 15.72661444 49.0720667, 15.72661237 49.07206632, 15.72661042 49.07206572, 15.72660864 49.07206494, 15.72660706 49.07206398, 15.72660574 49.07206287, 15.72660469 49.07206164, 15.72660395 49.07206031, 15.72660354 49.07205893, 15.72660346 49.07205752, 15.72660371 49.07205612, 15.7266043 49.07205476, 15.7266052 49.07205348, 15.72660639 49.07205231, 15.72660786 49.07205127, 15.72660954 49.0720504, 15.72661142 49.07204971, 15.72661344 49.07204923, 15.72661554 49.07204895, 15.72661769 49.0720489, 15.72661982 49.07204907), (15.7283067 49.07226266, 15.72830876 49.07226304, 15.72831071 49.07226363, 15.7283125 49.07226442, 15.72831407 49.07226538, 15.7283154 49.07226649, 15.72831645 49.07226772, 15.72831719 49.07226905, 15.7283176 49.07227043, 15.72831768 49.07227184, 15.72831743 49.07227324, 15.72831684 49.0722746, 15.72831594 49.07227588, 15.72831474 49.07227705, 15.72831328 49.07227809, 15.72831159 49.07227896, 15.72830972 49.07227965, 15.7283077 49.07228013, 15.7283056 49.07228041, 15.72830345 49.07228046, 15.72830132 49.07228029, 15.72829925 49.07227991, 15.7282973 49.07227931, 15.72829552 49.07227853, 15.72829394 49.07227757, 15.72829262 49.07227646, 15.72829157 49.07227523, 15.72829083 49.0722739, 15.72829041 49.07227252, 15.72829033 49.07227111, 15.72829059 49.07226971, 15.72829117 49.07226835, 15.72829208 49.07226707, 15.72829327 49.07226589, 15.72829473 49.07226486, 15.72829642 49.07226399, 15.7282983 49.0722633, 15.72830031 49.07226281, 15.72830242 49.07226254, 15.72830457 49.07226249, 15.7283067 49.07226266), (15.72851334 49.0721727, 15.7285154 49.07217308, 15.72851735 49.07217368, 15.72851914 49.07217446, 15.72852071 49.07217542, 15.72852204 49.07217653, 15.72852309 49.07217776, 15.72852383 49.07217909, 15.72852424 49.07218047, 15.72852432 49.07218188, 15.72852407 49.07218328, 15.72852348 49.07218464, 15.72852258 49.07218592, 15.72852138 49.07218709, 15.72851992 49.07218813, 15.72851823 49.072189, 15.72851636 49.07218969, 15.72851434 49.07219017, 15.72851224 49.07219045, 15.72851009 49.0721905, 15.72850796 49.07219033, 15.72850589 49.07218995, 15.72850394 49.07218935, 15.72850216 49.07218857, 15.72850058 49.07218761, 15.72849926 49.0721865, 15.72849821 49.07218527, 15.72849747 49.07218394, 15.72849705 49.07218256, 15.72849697 49.07218115, 15.72849723 49.07217975, 15.72849781 49.07217839, 15.72849872 49.07217711, 15.72849991 49.07217594, 15.72850137 49.0721749, 15.72850306 49.07217403, 15.72850494 49.07217334, 15.72850695 49.07217286, 15.72850906 49.07217258, 15.72851121 49.07217253, 15.72851334 49.0721727), (15.72850202 49.07337077, 15.72850408 49.07337116, 15.72850603 49.07337175, 15.72850782 49.07337253, 15.72850939 49.07337349, 15.72851072 49.0733746, 15.72851176 49.07337584, 15.72851251 49.07337716, 15.72851292 49.07337854, 15.728513 49.07337995, 15.72851275 49.07338135, 15.72851216 49.07338271, 15.72851126 49.07338399, 15.72851006 49.07338517, 15.7285086 49.0733862, 15.72850691 49.07338707, 15.72850504 49.07338776, 15.72850302 49.07338825, 15.72850092 49.07338852, 15.72849877 49.07338857, 15.72849664 49.0733884, 15.72849457 49.07338802, 15.72849262 49.07338743, 15.72849084 49.07338664, 15.72848926 49.07338568, 15.72848793 49.07338457, 15.72848689 49.07338334, 15.72848615 49.07338201, 15.72848573 49.07338063, 15.72848565 49.07337922, 15.72848591 49.07337782, 15.72848649 49.07337646, 15.72848739 49.07337518, 15.72848859 49.07337401, 15.72849005 49.07337297, 15.72849174 49.0733721, 15.72849362 49.07337141, 15.72849563 49.07337093, 15.72849774 49.07337066, 15.72849988 49.0733706, 15.72850202 49.07337077), (15.72897601 49.07291207, 15.72897808 49.07291246, 15.72898003 49.07291305, 15.72898181 49.07291383, 15.72898338 49.07291479, 15.72898471 49.0729159, 15.72898576 49.07291714, 15.7289865 49.07291846, 15.72898692 49.07291984, 15.728987 49.07292125, 15.72898674 49.07292266, 15.72898616 49.07292401, 15.72898525 49.07292529, 15.72898406 49.07292647, 15.7289826 49.0729275, 15.72898091 49.07292837, 15.72897903 49.07292906, 15.72897702 49.07292955, 15.72897491 49.07292982, 15.72897276 49.07292987, 15.72897063 49.0729297, 15.72896856 49.07292932, 15.72896661 49.07292873, 15.72896483 49.07292794, 15.72896325 49.07292698, 15.72896193 49.07292587, 15.72896088 49.07292464, 15.72896014 49.07292332, 15.72895973 49.07292193, 15.72895964 49.07292052, 15.7289599 49.07291912, 15.72896049 49.07291776, 15.72896139 49.07291648, 15.72896258 49.07291531, 15.72896404 49.07291428, 15.72896573 49.0729134, 15.72896761 49.07291272, 15.72896962 49.07291223, 15.72897173 49.07291196, 15.72897388 49.0729119, 15.72897601 49.07291207))';
    const wktGeojsonPolygon = L.geoJSON(Terraformer.wktToGeoJSON(wktString), {
        style: {
            color: 'red',
            weight: 2,
            fillOpacity: 0.1
        }
    })//.addTo(map);


    // Add points i.e. Scouting points from Growth Change Analysis (Field report) to the map
    const points = [ //taken from the result JSON
        { lat: 49.06976070227273, lng: 15.72785795290196},
        { lat: 49.070831138636365, lng: 15.731507060980391 }
    ];

    const scoutingPointsLayer = L.layerGroup(points.map(point => L.marker([point.lat, point.lng])));


    // Add layer control
    const baseLayers = {
        "OpenStreetMap": osm,
        "Czech orthophoto WMS": wmsLayer,
    };

    const overlays = {
        "Field Boundaries (WKT)": wktGeojsonPolygon,
        "Scouting Points": scoutingPointsLayer
    };
    L.control.layers(baseLayers, overlays).addTo(map);
    wktGeojsonPolygon.addTo(map);
    scoutingPointsLayer.addTo(map);


    // Add attribution for Dynacrop
    wktGeojsonPolygon.getAttribution = function() {
        return '© Dynacrop';
    };
    map.attributionControl.addAttribution(wktGeojsonPolygon.getAttribution());

    </script>
</body>
</html>